{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat {{ chat.id }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<div id="chat-log" style="width: 100vw">
    {% for message in messages %}
        <div class='message-div' id="message_{{ message.id }}">
            <span>{{ message.sender.username }}</span>
            <span>{{ message.text }}</span>
            {% if user.username == message.sender.username %}
                <button onclick="deleteMessage({{ message.id }})">Delete message</button>
                <button onclick="editMessageOnClick({{ message.id }})">Edit message</button>
            {% endif %}
        </div>
    {% endfor %}
</div>
<br>
<div id="chat-input">
    <input id="chat-message-input" type="text" size="100">
</div>
<br>
<button type="button" onclick="submitButtonOnClick()" id="submit-button">Send</button>
{{ chat.id|json_script:"chat-id" }}
{{ chat_type|json_script:"chat-type" }}

{% if chat_type == 'private' %} 
    <script
        src="{% static 'chat/js/script.js' %}">
    </script>
{% else %}
    <script
        src="{% static 'chat/js/public_chat_script.js' %}">
    </script>
{% endif %}

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous">
</script>
</body>
</html>